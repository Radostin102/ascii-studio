<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Studio</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

    <div class="sidebar">
        <h2>ASCII Studio</h2>

        <!-- 1. IMAGE & FILTERS -->
        <span class="section-title">1. Image & Filters</span>
        <div class="control-group">
            <input type="file" id="img-upload" accept="image/*">
        </div>

        <div class="control-group">
            <label>Brightness <span class="value-display" id="val-bright">100%</span></label>
            <input type="range" id="in-bright" min="0" max="300" value="100">
        </div>
        <div class="control-group">
            <label>Contrast <span class="value-display" id="val-contrast">100%</span></label>
            <input type="range" id="in-contrast" min="0" max="300" value="100">
        </div>
        <div class="control-group">
            <label>Blur <span class="value-display" id="val-blur">0px</span></label>
            <input type="range" id="in-blur" min="0" max="10" step="0.5" value="0">
        </div>

        <!-- 2. CANVAS & ZOOM -->
        <span class="section-title">2. Canvas & View</span>
        <div class="control-group">
            <label>Zoom level <span class="value-display" id="val-zoom">1.0x</span></label>
            <input type="range" id="input-zoom" min="0.1" max="5.0" step="0.1" value="1.0">
        </div>
        <div class="control-group">
            <label>Image opacity <span class="value-display" id="val-opacity">0.5</span></label>
            <div class="row">
                <input type="range" id="input-opacity" min="0" max="1" step="0.05" value="0.5">
                <button id="btn-toggle-img" class="btn"><i data-lucide="eye"></i></button>
            </div>
        </div>

        <!-- 3. TYPOGRAPHY -->
        <span class="section-title">3. Typography</span>
        <div class="control-group">
            <input type="text" id="input-font" placeholder="Font (e.g. Arial, Consolas)">
        </div>
        <div class="control-group">
            <label>Font size <span class="value-display" id="val-size">12px</span></label>
            <input type="range" id="input-size" min="1" max="64" value="12">
        </div>
        <div class="control-group">
            <label>Line height <span class="value-display" id="val-line">1.0</span></label>
            <input type="range" id="input-line" min="0.5" max="2.0" step="0.05" value="1.0">
        </div>
        <div class="control-group">
            <label>Character spacing <span class="value-display" id="val-spacing">0px</span></label>
            <input type="range" id="input-spacing" min="-5" max="15" step="0.5" value="0">
        </div>

        <div class="control-group">
            <label>Pattern fill</label>
            <div class="row">
                <input type="text" id="input-pattern" placeholder="e.g. -#" style="flex:2;">
                <button id="btn-fill" class="btn" style="flex:1;">Fill</button>
            </div>
        </div>
        <div class="row">
            <div class="control-group">
                <label>Text</label>
                <input type="color" id="input-color" value="#ffffff">
            </div>
            <div class="control-group">
                <label>Background</label>
                <input type="color" id="input-bg" value="#000000">
            </div>
        </div>

        <!-- 4. AUTO GENERATE -->
        <span class="section-title">4. Auto Generate</span>
        <div class="control-group">
            <label>Character set</label>
            <select id="char-preset">
                <option value="standard">Standard</option>
                <option value="standard_extended">Standard (extended)</option>
                <option value="super_extended">Super extended</option>
                <option value="blocks">Blocks</option>
                <option value="threshold">Threshold (2 chars)</option>
                <option value="binary">Binary</option>
                <option value="custom">Customâ€¦</option>
            </select>
        </div>
        <div class="control-group" id="custom-char-group" style="display:none;">
            <input type="text" id="input-custom-chars" value="@#S%?*+;:,. ">
        </div>

        <div class="control-group">
            <label>Dithering algorithm</label>
            <select id="dither-mode">
                <option value="none">None</option>
                <option value="floyd">Floyd-Steinberg</option>
                <option value="stucki">Stucki</option>
            </select>
        </div>

        <button id="btn-magic" class="btn btn-primary" style="margin-top:5px;"><i data-lucide="wand-2"
                style="width:16px; height:16px; vertical-align:middle; margin-right:5px;"></i> Generate</button>

        <!-- 5. EXPORT -->
        <span class="section-title">5. Export</span>
        <div class="row">
            <button id="btn-copy" class="btn">Copy</button>
            <button id="btn-download" class="btn">Save as .txt</button>
        </div>
        <button id="btn-clear" class="btn"
            style="background:#552222; border-color:#883333; margin-top:5px;">Clear</button>
    </div>

    <!-- WORKSPACE -->
    <div class="workspace" id="workspace">
        <div class="placeholder-text" id="placeholder">Upload an image to start</div>

        <div class="scroll-shim" id="scroll-shim">
            <div class="canvas-container" id="canvas-container">
                <img id="trace-image" src="" alt="">
                <textarea id="ascii-layer" spellcheck="false"></textarea>
            </div>
            <div id="char-counter">0 chars</div>
        </div>
    </div>

    <!-- Offscreen Canvases -->
    <canvas id="analysis-canvas" style="display:none;"></canvas>
    <canvas id="render-canvas" style="display:none;"></canvas>

    <!-- Confirmation Modal -->
    <div id="modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <h3>Overwrite canvas?</h3>
            <p>The canvas already contains text. Generating a new image will overwrite your current work.</p>
            <div class="modal-actions">
                <button id="btn-modal-cancel" class="btn">Cancel</button>
                <button id="btn-modal-confirm" class="btn btn-primary">Overwrite</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>
